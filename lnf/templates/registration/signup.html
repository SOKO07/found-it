{% extends "lnf/base.html" %}
{% load static %}

{% block content %}
<div class="auth-container">
  <div class="home-container">
    <img src="{% static 'lnf/images/home.png' %}" alt="My Image">
    <div class="home-logo">
      <h1><a href="{% url 'lnf:index' %}">FOUND IT</a></h1>
      <p>WHERE LOST ITEMS FIND THEIR WAY BACK</p>
    </div>
  </div>
  <div class="auth-form-container float-start">
    <div class="auth-form">
      <h2>Create Account</h2>
      <form method="post">
        {% csrf_token %}
        {% for field in form %}
          {# Debug: field.name={{ field.name }}, field.label={{ field.label }} #}
          <div class="form-field">
            {% if field.name == 'password1' or field.name == 'password2' %}
              {# <label for="{{ field.id_for_label }}">{{ field.label }}</label> #}
              <div class="password-wrapper">
                {{ field }}
                <button type="button" class="toggle-password">Show</button>
              </div>
              {{ field.errors }}
            {% else %}
              {{ field }}
              {{ field.errors }}
            {% endif %}
          </div>
        {% endfor %}
        {% if form.non_field_errors %}
          <div class="non-field-errors">
            {% for error in form.non_field_errors %}
              <p>{{ error }}</p>
            {% endfor %}
          </div>
        {% endif %}
        <button class="submit-button" type="submit">Sign Up</button>
      </form>
      <br>
      <p>Already have an account? <a href="{% url 'lnf:login' %}">Log In</a></p>
    </div>
  </div>
</div>

<style>
.password-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.password-wrapper input {
  width: 100%;
  padding-right: 60px; /* space for the button */
}

.toggle-password {
  position: absolute;
  right: 5px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  cursor: pointer;
  color: #007bff;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const togglePasswordButtons = document.querySelectorAll('.toggle-password');

  togglePasswordButtons.forEach(button => {
    button.addEventListener('click', function() {
      const passwordInput = this.parentElement.querySelector('input');
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        this.textContent = 'Hide';
      } else {
        passwordInput.type = 'password';
        this.textContent = 'Show';
      }
    });
  });
});
</script>
{% endblock %}
